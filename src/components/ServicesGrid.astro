---
import empresaData from "../data/aplicaciones-hidraulicas.json";
import Icon from "./icons/Icon.astro";

interface Servicio {
  nombre: string;
  icono: string;
  descripcion: string;
  caracteristicas: string[];
}

// Type assertion for data with new structure
const empresaConServicios = empresaData as any & {
  servicios: Servicio[];
};

// Mapear emojis a nombres de iconos SVG
const iconMap: Record<string, string> = {
  'üîë': 'key',
  '‚öôÔ∏è': 'gear',
  'üîß': 'wrench',
  'üõ†Ô∏è': 'hammer',
  'üì¶': 'package'
};
---

<section class="services-grid-section">
  <div class="container">
    <div class="services-header">
      <h2>Servicios Integrales</h2>
      <p>Cubrimos todas las fases de tu proyecto, desde el dise√±o inicial hasta el mantenimiento continuo</p>
    </div>
    
    <div class="services-grid">
      {empresaConServicios.servicios.map((servicio: Servicio, index: number) => {
        const iconName = iconMap[servicio.icono] || 'gear';

        return (
          <div class="service-card" style={`animation-delay: ${index * 0.15}s`}>
            <div class="service-icon-wrapper">
              <div class="service-icon"><Icon name={iconName} size={28} /></div>
            </div>

            <h3 class="service-title">{servicio.nombre}</h3>
          
          <div class="service-description">
            <p>{servicio.descripcion}</p>
          </div>
          
          <div class="service-features">
            {servicio.caracteristicas.map((caracteristica: string) => (
              <span class="feature-tag">{caracteristica}</span>
            ))}
          </div>
          
          <a href="#contacto" class="service-cta">
            Consultar {servicio.nombre}
          </a>
        </div>
        );
      })}
    </div>
    
  <!--   <div class="services-bottom-cta">
      <div class="cta-content">
        <h3>¬øNecesitas varios servicios?</h3>
        <p>Crea un paquete personalizado y benef√≠ciate de mejores condiciones</p>
        <a href="#contacto" class="cta-button">
          Solicitar propuesta integral
        </a>
      </div>
    </div>
  </div> -->
</section>

<style>
  .services-grid-section {
    padding: 5rem 0;
    background: linear-gradient(135deg, #f8fbff 0%, #e8f4fc 100%);
  }

  .container {
    max-width: 1200px;
    margin: 0 auto;
    padding: 0 1.5rem;
  }

  .services-header {
    text-align: center;
    margin-bottom: 4rem;
  }

  .services-header h2 {
    font-size: 2.5rem;
    color: #1568a7;
    margin-bottom: 1rem;
    font-weight: 600;
  }

  .services-header p {
    font-size: 1.2rem;
    color: #666;
    max-width: 700px;
    margin: 0 auto;
    line-height: 1.6;
  }

  .services-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
    gap: 2rem;
    margin-bottom: 4rem;
  }

  .service-card {
    background: white;
    border-radius: 16px;
    padding: 2.5rem 2rem;
    box-shadow: 0 8px 24px rgba(0, 0, 0, 0.08);
    border: 1px solid rgba(21, 104, 167, 0.1);
    transition: all 0.3s ease;
    opacity: 0;
    animation: fadeInUp 0.6s ease forwards;
    position: relative;
    overflow: hidden;
  }

  .service-card::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: linear-gradient(135deg, rgba(21, 104, 167, 0.02) 0%, rgba(21, 104, 167, 0.05) 100%);
    opacity: 0;
    transition: opacity 0.3s ease;
  }

  .service-card:hover::before {
    opacity: 1;
  }

  .service-card:hover {
    transform: translateY(-6px);
    box-shadow: 0 16px 32px rgba(21, 104, 167, 0.15);
    border-color: rgba(21, 104, 167, 0.3);
  }

  .service-icon-wrapper {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    width: 70px;
    height: 70px;
    background: linear-gradient(135deg, #1568a7 0%, #0f3558 100%);
    border-radius: 50%;
    margin-bottom: 1.5rem;
    position: relative;
    overflow: hidden;
  }

  .service-icon {
    font-size: 2rem;
    color: white;
  }

  .service-title {
    font-size: 1.3rem;
    color: #1568a7;
    margin: 0 0 1rem;
    font-weight: 600;
    position: relative;
  }

  .service-description {
    color: #555;
    line-height: 1.6;
    margin-bottom: 1.5rem;
    font-size: 0.95rem;
    position: relative;
  }

  .service-features {
    display: flex;
    flex-wrap: wrap;
    gap: 0.5rem;
    margin-bottom: 2rem;
    position: relative;
  }

  .feature-tag {
    background: rgba(21, 104, 167, 0.1);
    color: #1568a7;
    padding: 0.375rem 0.875rem;
    border-radius: 20px;
    font-size: 0.8rem;
    font-weight: 500;
    border: 1px solid rgba(21, 104, 167, 0.2);
  }

  .service-cta {
    width: 100%;
    padding: 0.875rem 1rem;
    background: transparent;
    color: #1568a7;
    border: 2px solid #1568a7;
    border-radius: 8px;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s ease;
    font-size: 0.9rem;
    position: relative;
  }

  .service-cta:hover {
    background: #1568a7;
    color: white;
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(21, 104, 167, 0.3);
  }

  .services-bottom-cta {
    background: linear-gradient(135deg, #1568a7 0%, #0f3558 100%);
    border-radius: 16px;
    padding: 3rem;
    text-align: center;
    color: white;
    position: relative;
    overflow: hidden;
  }

  .services-bottom-cta::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: url('data:image/svg+xml,<svg width="40" height="40" viewBox="0 0 40 40" xmlns="http://www.w3.org/2000/svg"><g fill="none" fill-rule="evenodd"><g fill="%23ffffff" fill-opacity="0.05"><circle cx="20" cy="20" r="3"/></g></g></svg>') repeat;
  }

  .cta-content {
    position: relative;
    z-index: 1;
  }

  .cta-content h3 {
    font-size: 1.8rem;
    margin: 0 0 1rem;
    font-weight: 600;
  }

  .cta-content p {
    font-size: 1.1rem;
    margin-bottom: 2rem;
    opacity: 0.9;
    line-height: 1.6;
  }

  .cta-button {
    display: inline-block;
    padding: 1rem 2rem;
    background: white;
    color: #1568a7;
    text-decoration: none;
    border-radius: 8px;
    font-weight: 600;
    transition: all 0.3s ease;
  }

  .cta-button:hover {
    transform: translateY(-2px);
    box-shadow: 0 8px 24px rgba(0, 0, 0, 0.2);
  }

  /* Responsive */
  @media (max-width: 768px) {
    .services-grid {
      grid-template-columns: 1fr;
      gap: 1.5rem;
    }

    .service-card {
      padding: 2rem 1.5rem;
    }

    .services-header h2 {
      font-size: 2rem;
    }

    .services-bottom-cta {
      padding: 2rem 1.5rem;
    }

    .cta-content h3 {
      font-size: 1.5rem;
    }
  }

  /* Animations */
  @keyframes fadeInUp {
    from {
      opacity: 0;
      transform: translateY(30px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  /* Accessibility */
  @media (prefers-reduced-motion: reduce) {
    .service-card,
    .service-cta:hover,
    .cta-button:hover,
    .service-card:hover {
      animation: none !important;
      transition: none !important;
    }
  }
</style>