---
// Props simplificadas del componente
const { 
  scrollTo = null,
  showText = true,
  text = "Explora m√°s abajo"
} = Astro.props;
---

<!-- Scroll Indicator Component - CSS-first approach -->
<div class="scroll-indicator" data-scroll-to={scrollTo}>
  {showText && (
    <div class="scroll-indicator__text">{text}</div>
  )}
  
  <div class="scroll-indicator__arrow">
    <div class="scroll-indicator__arrow-icon">
      <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" fill="currentColor" class="bi bi-arrow-down" viewBox="0 0 16 16">
  <path fill-rule="evenodd" d="M8 1a.5.5 0 0 1 .5.5v11.793l3.146-3.147a.5.5 0 0 1 .708.708l-4 4a.5.5 0 0 1-.708 0l-4-4a.5.5 0 0 1 .708-.708L7.5 13.293V1.5A.5.5 0 0 1 8 1"/>
</svg>
    </div>
  </div>
</div>

<script>
  // Simple click handler - minimal JavaScript
  document.addEventListener('DOMContentLoaded', () => {
    const scrollIndicators = document.querySelectorAll('.scroll-indicator');
    
    scrollIndicators.forEach(indicator => {
      indicator.addEventListener('click', () => {
        const scrollTo = indicator.getAttribute('data-scroll-to');
        
        if (scrollTo) {
          const selector = scrollTo.startsWith('#') ? scrollTo : `#${scrollTo}`;
          const target = document.querySelector(selector);
          
          if (target) {
            target.scrollIntoView({ behavior: 'smooth', block: 'start' });
          }
        }
      });
    });
  });
</script>

<style>
  /* CSS-First ScrollIndicator - Minimal JavaScript, Maximum CSS */
  
  .scroll-indicator {
    position: fixed;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 999;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    
    /* Desktop positioning: right side */
    right: 3rem;
    top: 50%;
    transform: translateY(-50%);
    
    /* Default sizing and styling */
    width: 56px;
    height: 56px;
    background: rgba(21, 104, 167, 0.95);
    backdrop-filter: blur(10px);
    border-radius: 50%;
    border: 2px solid rgba(255, 255, 255, 0.3);
    box-shadow: 0 8px 24px rgba(0, 0, 0, 0.15);
    opacity: 0.9;
  }

  .scroll-indicator:hover {
    opacity: 1;
    transform: translateY(-50%) scale(1.05);
    box-shadow: 0 12px 32px rgba(0, 0, 0, 0.2);
  }

  /* Mobile positioning: bottom-center */
  @media (max-width: 768px) {
    .scroll-indicator {
      right: auto;
      top: auto;
      bottom: calc(3rem + env(safe-area-inset-bottom, 0));
      left: 10%;
      transform: translateX(-50%);
      width: 64px;
      height: 64px;
      background: rgba(21, 104, 167, 0.95);
      backdrop-filter: blur(12px);
      border: 3px solid rgba(255, 255, 255, 0.4);
      box-shadow: 0 8px 24px rgba(0, 0, 0, 0.2);
    }

    .scroll-indicator:hover {
      transform: translateX(-50%) scale(1.08);
      box-shadow: 0 12px 32px rgba(0, 0, 0, 0.25);
    }

    /* Small mobile adjustments */
    @media (max-width: 480px) {
      .scroll-indicator {
        width: 56px;
        height: 56px;
        bottom: calc(2rem + env(safe-area-inset-bottom, 0));
      }
    }
  }

  /* Hide text completely */
  .scroll-indicator__text {
    display: none;
  }

  /* Arrow styling */
  .scroll-indicator__arrow {
    display: flex;
    align-items: center;
    justify-content: center;
  }

  .scroll-indicator__arrow-icon {
    width: 28px;
    height: 28px;
    color: white;
    animation: scrollBounce 2s ease-in-out infinite;
  }

  /* Mobile icon sizing */
  @media (max-width: 768px) {
    .scroll-indicator__arrow-icon {
      width: 28px;
      height: 28px;
      animation: scrollBounceMobile 2.5s ease-in-out infinite;
    }
  }

  @media (max-width: 480px) {
    .scroll-indicator__arrow-icon {
      width: 24px;
      height: 24px;
    }
  }

  /* Animations */
  @keyframes scrollBounce {
    0%, 20%, 50%, 80%, 100% {
      transform: translateY(0);
    }
    40% {
      transform: translateY(-10px);
    }
    60% {
      transform: translateY(-5px);
    }
  }

  @keyframes scrollBounceMobile {
    0%, 20%, 50%, 80%, 100% {
      transform: translateY(0);
    }
    40% {
      transform: translateY(-8px);
    }
    60% {
      transform: translateY(-4px);
    }
  }

  /* Accessibility and performance */
  @media (prefers-reduced-motion: reduce) {
    .scroll-indicator__arrow-icon {
      animation: none;
    }
    
    .scroll-indicator:hover {
      transform: translateY(-50%);
    }
  }

  @media (max-width: 768px) and (prefers-reduced-motion: reduce) {
    .scroll-indicator:hover {
      transform: translateX(-50%);
    }
  }
</style>